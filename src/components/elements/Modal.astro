---
/**
 * Open the modal using ID.showModal() method
 * <button class="btn" onclick="my_modal_1.showModal()">open modal</button>
 **/
import { type HTMLAttributes } from 'astro/types';

type Props = HTMLAttributes<'dialog'> & {
  id?: string;
  closeMethod?: 'button' | 'outside';
  closeOnEsc?: boolean;
  onOpen?: () => void;
  onClose?: () => void;
  show?: boolean;
};

const {
  id,
  closeMethod = 'outside',
  show = false,
  class: className,
  'class:list': classList,
  ...rest
} = Astro.props;

const props = {
  ...rest,
  ...(show && { open: true }),
};
---

<dialog id={id} class:list={['d-modal', className, classList]} {...props}>
  <div class="d-modal-box">
    <form method="dialog">
      <button class="d-btn d-btn-circle d-btn-ghost d-btn-sm absolute right-2 top-2">âœ•</button>
    </form>
    <slot />
    {
      closeMethod === 'button' && (
        <div class="d-modal-action">
          <form method="dialog">
            <button class="d-btn">
              <slot name="close-button">close</slot>
            </button>
          </form>
        </div>
      )
    }
  </div>
  {
    closeMethod === 'outside' && (
      <div class="d-modal-action">
        <form method="dialog" class="d-modal-backdrop">
          <button>close</button>
        </form>
      </div>
    )
  }
</dialog>
